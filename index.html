<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pokédex Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      margin: 30px;
      background-color: #f8f8f8;
    }

    h1 {
      color: #ef5350;
    }

    button {
      background-color: #ffcb05;
      color: #3b4cca;
      font-weight: bold;
      border: 2px solid #3b4cca;
      border-radius: 8px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      background-color: #3b4cca;
      color: #fff;
    }

    #currentPokemon {
      margin-top: 30px;
    }

    img {
      width: 200px;
      height: 200px;
      object-fit: contain;
    }

    #pokedex {
      margin-top: 50px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .pokedex-entry {
      border: 2px solid #3b4cca;
      background: white;
      padding: 10px;
      border-radius: 10px;
      width: 120px;
      transition: transform 0.2s;
    }

    .pokedex-entry:hover {
      transform: scale(1.05);
    }

    .pokedex-entry img {
      width: 100px;
      height: 100px;
    }

    .shiny {
      background-color: #fff3cd;
      border-color: #ffca28;
    }

    .shiny-name::after {
      content: " ✨";
    }
  </style>
</head>
<body>

  <h1>Pokédex Generator</h1>
  <button id="fetchBtn">Get Random Pokémon</button>
  <button id="clearBtn" style="margin-left:10px; background:#ef5350; color:white;">Clear Pokédex</button>

  <div id="currentPokemon">
    <h2 id="pokemonName"></h2>
    <img id="pokemonImage" src="" alt="">
  </div>

  <h2>Your Pokédex</h2>
  <div id="pokedex"></div>

  <script>
    const button = document.getElementById('fetchBtn');
    const clearButton = document.getElementById('clearBtn');
    const image = document.getElementById('pokemonImage');
    const nameDisplay = document.getElementById('pokemonName');
    const pokedexDiv = document.getElementById('pokedex');

    // Load Pokédex from localStorage or start empty
    let pokedex = JSON.parse(localStorage.getItem('pokedex')) || {};

    // Render saved Pokédex on page load
    Object.values(pokedex).forEach(p => addToPokedex(p.name, p.imageUrl, p.isShiny));

    // Fetch a random Pokémon
    button.addEventListener('click', async () => {
      const randomId = Math.floor(Math.random() * 1025) + 1;
      const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${randomId}`);
      const data = await response.json();

      const isShiny = Math.random() < 0.3;
      const name = data.name.charAt(0).toUpperCase() + data.name.slice(1);
      const imageUrl = isShiny ? data.sprites.front_shiny : data.sprites.front_default;

      // Display current Pokémon
      nameDisplay.textContent = isShiny ? `${name} ✨` : name;
      image.src = imageUrl;

      // Unique key to avoid duplicates
      const pokedexKey = `${data.name}-${isShiny ? "shiny" : "normal"}`;

      if (!pokedex[pokedexKey]) {
        pokedex[pokedexKey] = { name, isShiny, imageUrl };
        addToPokedex(name, imageUrl, isShiny);
        savePokedex();
      }
    });

    // Function to add Pokémon to the Pokédex display
    function addToPokedex(name, imageUrl, isShiny) {
      const entry = document.createElement('div');
      entry.classList.add('pokedex-entry');
      if (isShiny) entry.classList.add('shiny');

      const img = document.createElement('img');
      img.src = imageUrl;

      const label = document.createElement('div');
      label.textContent = name;
      if (isShiny) label.classList.add('shiny-name');

      entry.appendChild(img);
      entry.appendChild(label);
      pokedexDiv.appendChild(entry);
    }

    // Save Pokédex to localStorage
    function savePokedex() {
      localStorage.setItem('pokedex', JSON.stringify(pokedex));
    }

    // Clear Pokédex
    clearButton.addEventListener('click', () => {
      if (confirm("Are you sure you want to clear your Pokédex, Master?")) {
        pokedex = {};
        localStorage.removeItem('pokedex');
        pokedexDiv.innerHTML = '';
      }
    });
  </script>

</body>
</html>


